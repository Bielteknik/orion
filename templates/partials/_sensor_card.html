{% with sensor=sensor_info.sensor reading=sensor_info.last_reading %}
<div class="col-md-4 mb-3">
    <!-- DÜZELTME: Pasif ise kartı soluklaştır -->
    <div class="sensor-card {% if not sensor.is_active %}opacity-50{% endif %} 
        {% if 'sıcaklık' in sensor.name|lower %}temperature{% endif %}
        {% if 'nem' in sensor.name|lower %}humidity{% endif %}">
        
        <div class="row">
            <!-- Sol Taraf: Bilgiler -->
            <div class="col-8">
                <h6 class="text-truncate" title="{{ sensor.name }}">{{ sensor.name }}</h6>
                {% if reading and reading.value %}
                    <h3 class="fw-bold">
                    {% for key, value in reading.value.items %}{% if forloop.first %}
                        {{ value|floatformat:1 }} <small class="text-muted fs-6">{% if 'temperature' in key %}°C{% elif 'humidity' in key %}%{% elif 'distance' in key %}cm{% elif 'weight' in key %}kg{% endif %}</small>
                    {% endif %}{% endfor %}
                    </h3>
                {% else %}
                    <h3 class="fw-bold">-</h3>
                {% endif %}
                <small class="text-muted">{{ sensor.device.name }}</small>
            </div>
            <!-- Sağ Taraf: Durum ve Buton -->
            <div class="col-4 d-flex flex-column align-items-end justify-content-between">
                <div>
                    {% if sensor.is_active %}
                        <span class="badge bg-success">Aktif</span>
                    {% else %}
                         <span class="badge bg-secondary">Pasif</span>
                    {% endif %}
                </div>
                <div><i class="fas fa-thermometer-half fa-2x text-muted"></i></div>
                <div><button class="btn btn-sm btn-outline-light edit-sensor-btn" data-id="{{ sensor.id }}">Düzenle</button></div>
            </div>
        </div>

    </div>
</div>
{% endwith %}