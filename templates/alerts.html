{% extends 'base.html' %}
{% load static %}
{% block title %}Uyarılar ve Kurallar - {{ block.super }}{% endblock title %}

{% block content %}
<div id="alerts" class="page-content active">
    <!-- ... (Sayfanın üst kısmı aynı) ... -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="page-title"><i class="fas fa-exclamation-triangle me-2"></i>Uyarılar ve Kurallar</h2>
    </div>

    <!-- Kural Yönetimi Paneli -->
    <div class="glass-card mb-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 style="color: var(--dark-color); font-weight: 600;">Tanımlı Kurallar</h5>
            <!-- DÜZELTME: Butona doğru modal tetikleyicilerini ekle -->
            <button class="btn btn-gradient" data-bs-toggle="modal" data-bs-target="#ruleModal" id="addRuleBtnTrigger">
                <i class="fas fa-plus me-2"></i>Yeni Kural Ekle
            </button>
        </div>
        <div class="table-responsive">
            <!-- DÜZELTME: table-dark sınıfını kaldır -->
            <table class="table table-hover">
                <!-- ... (tablonun geri kalanı aynı) ... -->
            </table>
        </div>
    </div>
    
    <!-- Uyarı Geçmişi (Bu kısım aynı kalıyor) -->
    <div class="glass-card">
        <h5 style="color: var(--dark-color); font-weight: 600;" class="mb-3">Uyarı Geçmişi</h5>
        <div class="table-responsive">
            <table class="table table-hover">
                 <!-- ... (Uyarı geçmişi tablosu, table-dark sınıfı olmadan) ... -->
            </table>
        </div>
    </div>

    <!-- Yeni Kural Ekleme/Düzenleme Modal'ı (Bu kısım aynı) -->
    <div class="modal fade" id="ruleModal" tabindex="-1">
         <!-- ... (Modal içeriği aynı) ... -->
    </div>
</div>
{% endblock content %}

{% block extra_js %}
<script>
// Bu script bloğu bir önceki cevaptaki ile aynı, DOMContentLoaded içine alınmış
document.addEventListener('DOMContentLoaded', function() {
    // ... (bir önceki adımdaki tüm JavaScript kodu burada) ...
    const ruleModal = new bootstrap.Modal(document.getElementById('ruleModal'));
    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
    
    // DÜZELTME: "Yeni Kural Ekle" butonu için doğru tetikleyici
    document.getElementById('addRuleBtnTrigger').addEventListener('click', () => {
        // ... (geri kalanı aynı) ...
        ruleModal.show();
    });

    // ... (diğer tüm JS kodları) ...
});
</script>
{% endblock %}